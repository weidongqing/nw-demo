// Generated by CoffeeScript 1.10.0
var uiGridController;

uiGridController = function($scope, $log, i18nService, uiGridConstants) {
  var getPage, mydefalutData;
  i18nService.setCurrentLang("zh-cn");
  $scope.highlightFilteredHeader = function(row, rowRenderIndex, col, colRenderIndex) {
    if (col.filters[0].term) {
      return 'header-filtered';
    } else {
      return '';
    }
  };
  $scope.gridOptions = {
    data: 'myData',
    columnDefs: [
      {
        field: 'name',
        displayName: '名字',
        width: '10%',
        enableColumnMenu: false,
        enableHiding: false,
        suppressRemoveSort: true,
        enableCellEdit: false,
        headerCellClass: $scope.highlightFilteredHeader
      }, {
        field: 'gender',
        filter: {
          term: '',
          type: uiGridConstants.filter.SELECT,
          selectOptions: [
            {
              value: '1',
              label: '男'
            }, {
              value: '2',
              label: '女'
            }
          ]
        },
        cellFilter: 'mapGender',
        headerCellClass: $scope.highlightFilteredHeader
      }, {
        field: 'age'
      }, {
        field: 'birthday'
      }, {
        field: 'salary'
      }
    ],
    enableFiltering: true,
    enableSorting: true,
    useExternalSorting: false,
    enableGridMenu: true,
    showGridFooter: true,
    enableHorizontalScrollbar: 1,
    enableVerticalScrollbar: 0,
    enablePagination: true,
    enablePaginationControls: true,
    paginationPageSizes: [10, 15, 20],
    paginationCurrentPage: 1,
    paginationPageSize: 10,
    totalItems: 0,
    useExternalPagination: true,
    enableFooterTotalSelected: true,
    enableFullRowSelection: true,
    enableRowHeaderSelection: true,
    enableRowSelection: true,
    enableSelectAll: true,
    enableSelectionBatchEvent: true,
    modifierKeysToMultiSelect: false,
    multiSelect: true,
    noUnselect: false,
    selectionRowHeaderWidth: 30,
    isRowSelectable: function(row) {
      if (row.entity.age > 45) {
        row.grid.api.selection.selectRow(row.entity);
      }
    },
    onRegisterApi: function(gridApi) {
      $scope.gridApi = gridApi;
      gridApi.pagination.on.paginationChanged($scope, function(newPage, pageSize) {
        if (getPage) {
          getPage(newPage, pageSize);
        }
      });
      $scope.gridApi.selection.on.rowSelectionChanged($scope, function(row, event) {
        if (row) {
          $scope.testRow = row.entity;
        }
      });
    }
  };
  getPage = function(curPage, pageSize) {
    var firstRow, i, index, len, row;
    firstRow = (curPage - 1) * pageSize;
    $scope.gridOptions.totalItems = mydefalutData.length;
    $scope.gridOptions.data = mydefalutData.slice(firstRow, firstRow + pageSize);
    for (index = i = 0, len = mydefalutData.length; i < len; index = ++i) {
      row = mydefalutData[index];
      if (row.gender === '男') {
        row.gender = '1';
      } else {
        row.gender = '2';
      }
    }
  };
  mydefalutData = [
    {
      name: "Moroni",
      gender: "男",
      age: 50,
      birthday: "Oct 28, 1970",
      salary: "60,000"
    }, {
      name: "Ani",
      gender: "女",
      age: 60,
      birthday: "Oct 2, 1979",
      salary: "10,000"
    }, {
      name: "Nephi",
      gender: "男",
      age: 29,
      birthday: "May 31, 2010",
      salary: "40,000"
    }, {
      name: "Enos",
      gender: "女",
      age: 34,
      birthday: "Aug 3, 2008",
      salary: "30,000"
    }, {
      name: "Moroni",
      gender: "女",
      age: 50,
      birthday: "Oct 28, 1970",
      salary: "60,000"
    }, {
      name: "Tiancum",
      gender: "男",
      age: 43,
      birthday: "Feb 12, 1985",
      salary: "70,000"
    }, {
      name: "Jacob",
      gender: "女",
      age: 27,
      birthday: "Aug 23, 1983",
      salary: "40,000"
    }, {
      name: "Nephi",
      gender: "男",
      age: 29,
      birthday: "May 31, 2010",
      salary: "50,000"
    }, {
      name: "Enos",
      gender: "男",
      age: 34,
      birthday: "Aug 3, 2008",
      salary: "30,000"
    }, {
      name: "Moroni",
      gender: "女",
      age: 50,
      birthday: "Oct 28, 1970",
      salary: "60,000"
    }, {
      name: "Tiancum",
      gender: "女",
      age: 43,
      birthday: "Feb 12, 1985",
      salary: "70,000"
    }, {
      name: "Jacob",
      gender: "女",
      age: 27,
      birthday: "Aug 23, 1983",
      salary: "40,000"
    }, {
      name: "Nephi",
      gender: "男",
      age: 29,
      birthday: "May 31, 2010",
      salary: "50,000"
    }, {
      name: "Enos",
      gender: "女",
      age: 34,
      birthday: "Aug 3, 2008",
      salary: "30,000"
    }
  ];
  getPage(1, $scope.gridOptions.paginationPageSize);
};

angular.module('app.controller').controller('uiGridCtrl', ['$scope', '$log', 'i18nService', 'uiGridConstants', uiGridController]);
